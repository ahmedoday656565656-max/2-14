<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>إليكِ</title>
    <style>
        :root {
            --bg: #f2f0eb;
            --card: #ffffff;
            --text: #4a4a4a;
            --accent: #8c7b6c;
        }

        body {
            margin: 0; padding: 0;
            display: flex; justify-content: center; align-items: center;
            height: 100vh; background-color: var(--bg);
            font-family: 'Times New Roman', serif; color: var(--text);
            overflow: hidden;
        }

        .container {
            width: 80%; max-width: 380px;
            padding: 60px 30px;
            background: var(--card);
            border-radius: 4px; /* زوايا كلاسيكية */
            box-shadow: 0 10px 40px rgba(0,0,0,0.03);
            text-align: center;
            transition: opacity 1s ease-in-out;
        }

        h2 {
            font-weight: 300; font-size: 1.25rem; line-height: 1.8;
            margin-bottom: 50px; min-height: 100px;
        }

        .btn-wrapper { display: flex; flex-direction: column; gap: 15px; align-items: center; }

        button {
            background: none; border: 1px solid var(--accent);
            padding: 12px 20px; color: var(--accent);
            cursor: pointer; font-size: 0.95rem; width: 100%;
            max-width: 220px; transition: all 0.5s ease;
            letter-spacing: 0.5px;
        }

        button:hover, button:active {
            background: var(--accent);
            color: white;
        }

        #decline-btn {
            border: none; opacity: 0.5; font-size: 0.85rem;
            text-decoration: underline; margin-top: 10px;
        }

        .fade-in { animation: fadeIn 1.2s forwards; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    </style>
</head>
<body>

    <audio id="myAudio" loop preload="auto" playsinline>
        <source src="music.mp3" type="audio/mpeg">
    </audio>

    <div class="container" id="box">
        <h2 id="text" class="fade-in">مرت سنوات.. وتغير فينا كل شيء، إلا ما كنتُ أشعر به اتجاهكِ.</h2>
        <div class="btn-wrapper" id="actions">
            <button onclick="initAudio()">أتفهم ذلك</button>
        </div>
    </div>

    <script>
        const myAudio = document.getElementById("myAudio");
        let isPlaying = false;

        function initAudio() {
            if (!isPlaying) {
                myAudio.play().catch(e => console.log("Audio play failed"));
                isPlaying = true;
            }
            step(1);
        }

        const story = [
            {
                text: "لم يكن الغياب سهلاً، ولم يكن نسيانكِ ممكناً.. كنتِ دائماً الجزء الأجمل في ذاكرتي المتعبة.",
                btn: "لماذا عدت الآن؟",
                action: "step(2)"
            },
            {
                text: "لأنني أدركت بعد كل هذه السنين، أنني لا أريد أن أعيش خريفاً آخر دون أن أعتذر لكِ.. ودون أن أخبركِ بمكاني.",
                btn: "أكمل حديثك",
                action: "step(3)"
            },
            {
                text: "أعلم أن الوقت قد غيّر ملامحنا وظروفنا، لكنني ما زلت أحمل لكِ في قلبي صدقاً لا يصدأ.",
                btn: "وماذا ترجو؟",
                action: "step(4)"
            }
        ];

        function step(index) {
            const box = document.getElementById('box');
            const text = document.getElementById('text');
            const actions = document.getElementById('actions');

            box.style.opacity = '0';

            setTimeout(() => {
                if (index <= story.length) {
                    const current = story[index - 1];
                    text.innerText = current.text;
                    actions.innerHTML = `<button onclick="ensurePlay(); ${current.action}">${current.btn}</button>`;
                } else {
                    text.innerText = "هل تقبلين أن نتجاوز ما مضى، ونمنح أرواحنا فرصة لنلتقي مجدداً بهدوء؟";
                    actions.innerHTML = `
                        <button onclick="ensurePlay(); finish()">أقبل التواصل</button>
                        <button id="decline-btn" onclick="decline()">أفضل البقاء بعيداً</button>
                    `;
                }
                box.style.opacity = '1';
            }, 800);
        }

        function ensurePlay() { if (myAudio.paused) myAudio.play(); }

        function finish() {
            const box = document.getElementById('box');
            box.style.opacity = '0';
            setTimeout(() => {
                box.innerHTML = `
                    <h2 class="fade-in" style="font-style: italic;">شكراً لأن قلبكِ ما زال يتسع لي.. سأنتظر ردكِ بكل صبر.</h2>
                `;
                box.style.opacity = '1';
            }, 800);
        }

        function decline() {
            const box = document.getElementById('box');
            box.style.opacity = '0';
            setTimeout(() => {
                box.innerHTML = `
                    <h2 class="fade-in">أحترم قراركِ جداً.. ستبقى لكِ دائماً أطيب الذكريات في قلبي. شكراً لكِ.</h2>
                `;
                box.style.opacity = '1';
            }, 800);
        }
    </script>
</body>
</html>
